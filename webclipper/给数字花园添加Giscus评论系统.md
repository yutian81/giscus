---  
title: 给数字花园添加Giscus评论系统  
summary: 给数字花园添加Giscus评论系统  
author:  
  - 雨天狂奔  
showSidebar: true  
isDraft:   
date: 2024-05-02T16:22:00  
share: true  
published: true  
---  
  
## 📝 前言  
  
对于自己的数字花园，一开始并没有在评论区和自己的阅读者进行交流互动的打算，主要的原因是考虑到在数字花园中的想法并不成熟，加之数字花园现有的笔记基本是自己学习过程中的笔记，更多的是对自己所学知识的整理。直到昨天在完善自己博客的评论系统，突然想到一个评论系统更能拉近自己和读者之间的交流。面对同样的知识，读者可能会遇到各种各样的问题，希望能与作者进行交流，答疑。所以，决定也给自己数字花园加上一个评论系统。  
## 📝 giscus的部署  
  
giscus是基于Github Discussions实现的评论系统，受utterances的启发。它会使用Github Discussions搜索API来搜索当前页面对应的discussions，即对于当前页面的评论。  
  
1. 点击以下链接在github创建新仓库  
  
[![](https://camo.githubusercontent.com/bac27075fd0777f26148475c443032cc369c2156f0a66b81b06f5341ab96b9e0/68747470733a2f2f776f726b65722e726168632e746f702f696d67732f6e6f74696f6e2f3230323430323034313032323839352e706e673f743d37326338623534372d376364332d343662642d396566642d303930663065303265616338)](https://camo.githubusercontent.com/bac27075fd0777f26148475c443032cc369c2156f0a66b81b06f5341ab96b9e0/68747470733a2f2f776f726b65722e726168632e746f702f696d67732f6e6f74696f6e2f3230323430323034313032323839352e706e673f743d37326338623534372d376364332d343662642d396566642d303930663065303265616338)  
  
2. 在新建的仓库的`settings->general->Discussions` ，中打开Discussions功能。  
  
[![](https://camo.githubusercontent.com/9b016305041fe14094e5f0dcb0132355299020a1d7739686ab410a6cd7001296/68747470733a2f2f776f726b65722e726168632e746f702f696d67732f6e6f74696f6e2f3230323430323034313032363032302e706e673f743d62663536306534302d653938332d343963352d386539642d613837663937313531643530)](https://camo.githubusercontent.com/9b016305041fe14094e5f0dcb0132355299020a1d7739686ab410a6cd7001296/68747470733a2f2f776f726b65722e726168632e746f702f696d67732f6e6f74696f6e2f3230323430323034313032363032302e706e673f743d62663536306534302d653938332d343963352d386539642d613837663937313531643530)  
  
3. 点击该链接：[https://github.com/apps/giscus](https://github.com/apps/giscus)，在github安装giscus插件。  
4. 点击该链接：[https://giscus.app/zh-CN](https://giscus.app/zh-CN)，对giscus进行配置，把giscus关联到步骤1创建的新仓库  
  
[![](https://camo.githubusercontent.com/c7842a8bfc70b9ddbde83b42fe070886801d4948c076c584fad1502e5f18bb66/68747470733a2f2f776f726b65722e726168632e746f702f696d67732f6e6f74696f6e2f3230323430323034313033353730312e706e673f743d31333334393762612d303362382d346439662d383838612d666436326337386465313931)](https://camo.githubusercontent.com/c7842a8bfc70b9ddbde83b42fe070886801d4948c076c584fad1502e5f18bb66/68747470733a2f2f776f726b65722e726168632e746f702f696d67732f6e6f74696f6e2f3230323430323034313033353730312e706e673f743d31333334393762612d303362382d346439662d383838612d666436326337386465313931)  
  
5. 复制以下代码，等待后续步骤的使用。  
  
[![](https://camo.githubusercontent.com/ee3d3f463067bdbee2586c10d9d9c2b334fa3be2520bd54764478ebdec5876d4/68747470733a2f2f776f726b65722e726168632e746f702f696d67732f6e6f74696f6e2f3230323430323034313033373735332e706e673f743d34643032336162352d623438302d343136332d383738622d616139643235356236623737)](https://camo.githubusercontent.com/ee3d3f463067bdbee2586c10d9d9c2b334fa3be2520bd54764478ebdec5876d4/68747470733a2f2f776f726b65722e726168632e746f702f696d67732f6e6f74696f6e2f3230323430323034313033373735332e706e673f743d34643032336162352d623438302d343136332d383738622d616139643235356236623737)  
  
6. 配置数字花园仓库，这里我推荐用[GitHub Desktop](https://desktop.github.com/)拉取数字花园仓库，再用[vscode](https://code.visualstudio.com/)编辑，然后再用GitHub Desktop提交并推送到远程仓库的方式。  
  
[![](https://camo.githubusercontent.com/b51523d1d039093d7df4a054aa60e843475929a759b215639de8961036003678/68747470733a2f2f776f726b65722e726168632e746f702f696d67732f6e6f74696f6e2f3230323430323034313034373134392e706e673f743d61323461323965302d313830612d343766332d393962392d373262383335623864393933)](https://camo.githubusercontent.com/b51523d1d039093d7df4a054aa60e843475929a759b215639de8961036003678/68747470733a2f2f776f726b65722e726168632e746f702f696d67732f6e6f74696f6e2f3230323430323034313034373134392e706e673f743d61323461323965302d313830612d343766332d393962392d373262383335623864393933)  
  
在`src/site/_includes/components/user` 目录下，我们可以给自己的数字花园添加自定义的组件。由于我们是给我们的每篇笔记页面都添加一个评论，所以在该目录下新建`notes/footer` 目录，在该目录下添加如下文件`001-giscus-comment.njk` ，文件名除了扩展名`.njk` 外，名字可以随意。文件内容为步骤5中的内容。  
  
### JavaScript的  
  
```  
<script src="[https://giscus.app/client.js](https://giscus.app/client.js)"  
        data-repo="github用户名/步骤1创建的仓库名"  
        data-repo-id="你的date-repo-id"  
        data-category="Announcements"  
        data-category-id="你的data-category-id"  
        data-mapping="pathname"  
        data-strict="0"  
        data-reactions-enabled="1"  
        data-emit-metadata="0"  
        data-input-position="bottom"  
        data-theme="preferred_color_scheme"  
        data-lang="zh-CN"  
        crossorigin="anonymous"  
        async>  
</script>  
```  
  
7. 修改页面布局。编辑`src/_includes/layouts/note.njk` 文件。 默认的布局是如图所示，分为左、中、右：  
  
[![](https://camo.githubusercontent.com/b21f9a6483ebc1e0f76b3081e5163678f6713175cd2e035b59a9df2837ca8660/68747470733a2f2f776f726b65722e726168632e746f702f696d67732f6e6f74696f6e2f3230323430323034313130343337312e706e673f743d61343131643531632d376663342d343233662d393037652d656462333664663732643331)](https://camo.githubusercontent.com/b21f9a6483ebc1e0f76b3081e5163678f6713175cd2e035b59a9df2837ca8660/68747470733a2f2f776f726b65722e726168632e746f702f696d67732f6e6f74696f6e2f3230323430323034313130343337312e706e673f743d61343131643531632d376663342d343233662d393037652d656462333664663732643331)  
  
如果不修改，它会在最底层生成一个横跨左、中、右的一个评论区域，影响美观。而我只是想在中间的底部，加上一个评论区域。在`note.njk` 文件的`<main>...</main>` 之间添加如下代码：  
  
### JavaScript的  
  
```  
<main>  
	// 底部添加如下代码  
	{% for imp in dynamics.notes.footer %}  
	  {% include imp %}  
  {% endfor %}  
</main>  
```  
  
注释掉main之后，body内相同的代码：  
  
### JavaScript的  
  
```  
<body>  
	{# {% for imp in dynamics.notes.footer %}  
	  {% include imp %}  
  {% endfor %} #}  
  {%include "components/lucideIcons.njk"%}  
</body>  
```  
  
现在的布局如图所示：  
  
[![](https://camo.githubusercontent.com/47e0c3a2ca024eeec56e9ac7c21754c19a3d4672dd65683f07a944f439bf672c/68747470733a2f2f776f726b65722e726168632e746f702f696d67732f6e6f74696f6e2f3230323430323034313131383131312e706e673f743d32363466313535392d633532362d346561302d393739632d323738393365616166393939)](https://camo.githubusercontent.com/47e0c3a2ca024eeec56e9ac7c21754c19a3d4672dd65683f07a944f439bf672c/68747470733a2f2f776f726b65722e726168632e746f702f696d67732f6e6f74696f6e2f3230323430323034313131383131312e706e673f743d32363466313535392d633532362d346561302d393739632d323738393365616166393939)  
  
8. 最终的效果如图所示：  
  
[![](https://camo.githubusercontent.com/9b8c881149e809b5a937dd2597579c222e6d552ab9808fb0bacf213e74c9e058/68747470733a2f2f776f726b65722e726168632e746f702f696d67732f6e6f74696f6e2f3230323430323034313132303633362e706e673f743d38623838306565392d613262372d346530362d386261612d313134373230646539336164)](https://camo.githubusercontent.com/9b8c881149e809b5a937dd2597579c222e6d552ab9808fb0bacf213e74c9e058/68747470733a2f2f776f726b65722e726168632e746f702f696d67732f6e6f74696f6e2f3230323430323034313132303633362e706e673f743d38623838306565392d613262372d346530362d386261612d313134373230646539336164)  
  
最后，欢迎您到[我的数字花园](https://garden.rahc.top/)逛逛，一起进步成长，学有所成。  
